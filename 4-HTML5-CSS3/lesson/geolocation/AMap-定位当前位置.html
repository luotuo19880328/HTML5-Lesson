<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<style type="text/css">
			html,
			body,
			#container {
				height: 100%;
				margin: 0;
			}
		</style>
	</head>
	<body>
		<div id="container"></div>
		<script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=d559d34deaf5461ac14da27d6526ae88"></script>
		<script type="text/javascript">
			var map = new AMap.Map('container', {
				zoom: 10
			})

			AMap.plugin('AMap.Geolocation', function() {
				var geolocation = new AMap.Geolocation({
					// 是否使用高精度定位，默认：true
					enableHighAccuracy: true,
					// 设置定位超时时间，默认：无穷大
					timeout: 10000,
					// 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)
					buttonOffset: new AMap.Pixel(10, 20),
					//  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
					zoomToAccuracy: true,
					//  定位按钮的排放位置,  RB表示右下
					buttonPosition: 'RB'
				})

				geolocation.getCurrentPosition(function(status, result) {
					if (status == 'complete') {
						onComplete(result)
					} else {
						onError(result)
					}
				});

				function onComplete(data) {
					// data是具体的定位信息
					console.log(data);
					// 创建一个 Marker 实例：
					var marker = new AMap.Marker({
					    position: new AMap.LngLat(data.position.lng, data.position.lat),   // 经纬度对象，也可以是经纬度构成的一维数组[116.39, 39.9]
					});
					
					// 将创建的点标记添加到已有的地图实例：
					map.add(marker);
				}

				function onError(data) {
					// 定位出错
					console.log(data);
				}
			})
		</script>
	</body>
</html>
