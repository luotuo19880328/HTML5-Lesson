<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style type="text/css">
			.chat-box {
				padding: 10px;
				border: 2px solid blue;
				margin-top: 10px;
			}
		</style>
	</head>

	<body>
		<fieldset id="">
			<legend>过滤违禁词</legend>
			<ol>
				<li>检索字符串：indexOf 结果==-1，代表没有；结果>=0，代表有</li>
			</ol>
			<div class="box">
				<input type="text" id="content" placeholder="请输入聊天内容!" />
				<button type="button" id="send">发送</button>
				<div class="chat-box">
					<p>我说：分开发</p>
				</div>
			</div>
			<script type="text/javascript">
				// 查找元素
				var oContent = document.getElementById('content');
				var oSendBtn = document.getElementById('send');
				var oChatBox = document.querySelector('.chat-box');

				oSendBtn.onclick = function() {
					// 获取value
					var text = oContent.value;
					// 检索字符串
					// var isHave = text.indexOf("SB");
					var isHave = text.includes('SB');
					// 存在违禁词，替换字符串
					if (isHave) {
						text = text.replace('SB', '**');
					}
					// 发送留言
					var oP = document.createElement('p');
					oP.innerText = '我说：' + text;
					oChatBox.appendChild(oP);
				}
			</script>

		</fieldset>

		<fieldset id="">
			<legend>手机号码重新格式化</legend>
			<p>
				<input type="text" id="tel" placeholder="请输入手机号码">
				<button id="convert" type="button">格式化</button>
			</p>
			<script type="text/javascript">
				// 查找元素
				var oTel = document.querySelector('#tel');
				var oConvert = document.querySelector('#convert');
				// 格式化状态
				var isConvert = false;

				oConvert.onclick = function() {
					// 判断是否格式化
					if (isConvert) {
						return;
					}
					// 获取value
					var tel = oTel.value.trim();
					// 分段截取
					tel = tel.slice(0, 3) + ' ' + tel.slice(3, 7) + ' ' + tel.slice(7, 11)
					// 重新赋值
					oTel.value = tel;
					// 修改状态
					isConvert = true;
				}
			</script>
		</fieldset>

		<fieldset id="">
			<legend>字符串 => 数组</legend>

			<p>
				https://detail.tmall.com/item.htm?spm=875.7931836/B.20161011.4.7bb14265hBSAvE <br>
				&pvid=ac9169cf-8c4a-4124-8653-d8989da45ee7 <br>
				&pos=4 <br>
				&acm=201509290.1003.1.1286473 <br>
				&id=628235860448 <br>
				&scm=1007.12710.81708.100200300000000 <br>
				&skuId=4634632366350 <br>
			</p>

			<script type="text/javascript">
				var link =
					"https://detail.tmall.com/item.htm?spm=875.7931836/B.20161011.4.7bb14265hBSAvE&pvid=ac9169cf-8c4a-4124-8653-d8989da45ee7&pos=4&acm=201509290.1003.1.1286473&id=628235860448&scm=1007.12710.81708.100200300000000&skuId=4634632366350"
				// 检索问号所在位置
				var i = link.indexOf('?');
				var queryString = link.slice(i + 1);
				var query = queryString.split('&');

				var obj = {};
				query.forEach(function(item) {
					var arr = item.split('=');
					obj[arr[0]] = arr[1];
				});
				console.log(obj);
			</script>
		</fieldset>
	</body>

</html>
