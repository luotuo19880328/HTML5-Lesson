<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>

	<body>
		<button id="create" type="button">增cookie</button>
		<button id="delete" type="button">删cookie</button>
		<button id="update" type="button">改cookie</button>
		<button id="read" type="button">查cookie</button>

		<script type="text/javascript">
			function setCookie(cname, cvalue, exdays) {
				var d = new Date();
				d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
				var expires = "expires=" + d.toGMTString();
				document.cookie = cname + "=" + cvalue + "; " + expires;
			}

			function getCookie(cname) {
				var name = cname + "=";
				var ca = document.cookie.split(';');
				for (var i = 0; i < ca.length; i++) {
					var c = ca[i].trim();
					var arrC = c.split("=");
					if (arrC[0] == cname) {
						return arrC[1];
					}
				}
				return "";
			}
		</script>
		<script type="text/javascript">
			// 查找元素
			var oCreate = document.getElementById("create");
			var oDelete = document.getElementById("delete");
			var oUpdate = document.getElementById("update");
			var oRead = document.getElementById("read");
			// 添加数据
			oCreate.onclick = function() {
				// 会话状态
				document.cookie = 'username = 刘备';
				// 有效期
				// document.cookie = 'sex = 男;expires=' + new Date(2022, 0, 1).toGMTString();
				setCookie('sex', '男', 365);
				// 对象
				var person = { name: '黄小米', age: 25 };
				// 对象 => JSON
				var json = JSON.stringify(person);
				setCookie('person', json, 10);
				// 数组
				var team = ['赵云', '诸葛亮', '黄忠'];
				// 数组 => JSON
				var json = JSON.stringify(team);
				setCookie('team', json, 10);
			}
			// 删除cookie
			oDelete.onclick = function() {
				document.cookie = 'sex=;expires=Thu, 01 Jan 1970 00:00:00 GMT';
			}
			// 修改cookie
			oUpdate.onclick = function() {
				document.cookie = 'username = 关羽';
			}
			// 获取cookie
			oRead.onclick = function() {
				var username = getCookie('username');
				console.log('username:%s', username)
				// 获取对象
				var json = getCookie('person');
				// JSON => 对象
				var person = JSON.parse(json);
				console.log('person:%o', person);
				// 获取数组
				var json = getCookie('team');
				// JSON => 数组
				var team = JSON.parse(json);
				console.log('team:%o', team);
			}
		</script>
	</body>

</html>
