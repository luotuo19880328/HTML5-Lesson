<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.hero-list {
				display: flex;
				flex-wrap: wrap;
			}

			.hero {
				width: 200px;
				margin: 10px;
				box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);
			}

			.hero .color {
				height: 200px;
				text-align: center;
				background-color: orange;
			}

			.hero .info {
				padding: 15px;
			}

			.hero .info .stage {
				margin-top: 15px;
			}
		</style>
	</head>

	<body>
		<div id="app">
			<hero-list></hero-list>
		</div>
		<script src="./lib/vue/vue.js"></script>
		<script id="tmpl-hero" type="text/x-template">
			<div class="hero">
				<div class="color" :style="{backgroundColor:color}"></div>
				<div class="info">
					<div class="name">姓名：{{name}}</div>
					<div class="stage">
						<label>评级：</label>
						<input @change="_handleChange" type="color" :value="color">
					</div>
				</div>
			</div>
		</script>
		<script type="text/javascript">
			Vue.component('hero', {
				// 组件外部数据
				props: ['name', 'color'],
				methods: {
					_handleChange: function(e) {
						// 发送事件，携带数据
						this.$emit('rate', e.target.value);
					}
				},
				template: '#tmpl-hero',
			});

			Vue.component('hero-list', {
				// 组件内部数据
				data: function() {
					return {
						team: [
							{ name: '刘备', color: '#4400ff' },
							{ name: '关羽', color: '#0FF000' },
							{ name: '张飞', color: '#00c5f6' },
							{ name: '赵云', color: '#FF00F0' },
							{ name: '黄忠', color: '#FFF000' },
							{ name: '马超', color: '#FF2000' },
							{ name: '庞统', color: '#63f104' },
							{ name: '姜维', color: '#ff8400' },
							{ name: '魏延', color: '#686868' },
						]
					}
				},
				methods: {
					handleRate: function(hero, color) {
						hero.color = color;
					}
				},
				template: `
				<div class="hero-list">
					<hero v-for="hero in team" @rate="handleRate(hero,$event)" :name="hero.name" :color="hero.color"></hero>
				</div>`
			});

			var app = new Vue({
				el: "#app",
			});
		</script>
	</body>

</html>
