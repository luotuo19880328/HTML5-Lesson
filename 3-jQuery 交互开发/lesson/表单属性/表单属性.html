<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.register {
				background-color: blue;
				color: white;
				border: 1px solid darkblue;
				outline: 0;
				padding: 4px 20px;
			}

			.input-control {
				outline: 0;
				border: 1px solid gray;
				padding: 6px 10px;
				color: blue;
			}

			/* 单选、复选框样式不可更改 */
			.degree {
				width: 200px;
				color: red;
				padding: 4px 10px;
				border: 1px solid green;
			}

			.register[disabled] {
				background-color: gray;
			}
		</style>
	</head>
	<body>
		<form>
			<p>
				<label>账号：</label>
				<input placeholder="请输入至少6位用户名" class="username input-control" type="text">
			</p>
			<p>
				<label>密码：</label>
				<input placeholder="请输入至少6位数字" class="password input-control" type="password">
				<b class="eye">👀</b>
			</p>
			<p>
				<label>推荐：</label>
				<input type="text" readonly value="XPOS">
			</p>
			<p>
				<label>性别：</label>
				<label>
					<input type="radio" class="sex" checked name="sex" value="1" /> 男
				</label>
				<label>
					<input type="radio" class="sex" name="sex" value="0" /> 女
				</label>
			</p>
			<p>
				<label>爱好：</label>
				<label>
					<input name="hobby" value="电影" checked type="checkbox"> 电影
				</label>
				<label>
					<input name="hobby" value="旅游" type="checkbox"> 旅游
				</label>
				<label>
					<input name="hobby" value="摄影" type="checkbox"> 摄影
				</label>
				<label>
					<input name="hobby" value="绘画" type="checkbox"> 绘画
				</label>
				<label>
					<input id="chkAll" type="checkbox"> 全选
				</label>
			</p>
			<p>
				<label>学历：</label>
				<select class="degree">
					<option value="高中">high school</option>
					<option selected value="专科">专科</option>
					<option value="本科">本科</option>
					<option value="研究生">研究生</option>
					<option value="博士">博士</option>
				</select>
			</p>
			<p>
				<label>介绍：</label>
				<textarea class="info" placeholder="请输入至少100字的自我介绍" rows="10" cols="30"></textarea>
				<small></small>
			</p>
			<p>
				<label class="lisence"><input type="checkbox" />我已阅读网站的用户协议</label>
			</p>
			<p>
				<button id="register" disabled class="register btn" type="button">注 册</button>
			</p>
		</form>
		<script src="js/jquery-3.4.1.min.js"></script>
		<script type="text/javascript">
			// disabled
			$('.lisence').click(function(e) {
				// 阻止事件冒泡
				e.stopPropagation();
				// 获取复选框的状态
				var isCheck = $(this).find('input:checkbox').prop('checked');
				// 根据复选框的选中是否，修改disabled属性
				if (isCheck) {
					// 取消禁用
					$('#register').prop('disabled', false);
				} else {
					// 设置禁用
					$('#register').prop('disabled', true);
				}
				// 简化为  $('#register').prop('disabled', !isCheck);

			});
			// 注册按钮
			$('#register').click(function() {
				// 多个表单，val()获取的第一个value
				// 单选：获取性别的value
				var sex = $('input[name=sex]:checked').val();
				console.log('性别：' + sex);
				// 复选：无法直接获取value,each方法获取value
				var hobby = [];
				$('input[name=hobby]:checked').each(function() {
					hobby.push($(this).val());
				})
				console.log('爱好：' + hobby.toString())
				// select
				var degree = $('.degree').val();
				console.log('学历：' + degree);
				// textarea
				var info = $('.info').val();
				console.log('自我介绍：' + info);
			});
			// change事件 -- 表单验证
			$('.username').change(function() {
				// 获取value
				var username = $(this).val();
				// 正则对象
				var reg = /\w{6,}/;
				var isValid = reg.test(username);
				if (isValid) {
					$(this).css('border', '1px solid green');
				} else {
					$(this).css('border', '1px solid red');
				}
			});
			// 全选 -- 正方向 点击全选=>项目全选中/全取消	
			$('#chkAll').click(function() {
				// 获取自身的checked状态
				var isCheckAll = $(this).prop('checked');
				// 简化
				$('input[name=hobby]').prop('checked', isCheckAll);
				// if (isCheckAll) {
				// 	$('input[name=hobby]').prop('checked', true);
				// } else {
				// 	$('input[name=hobby]').prop('checked', false);
				// }
			});
			// 全选 -- 反方向 项目选中/取消 => 全选的状态
			$('input[name=hobby]').click(function() {
				// 获取checkbox的总数
				var all = $('input[name=hobby]').length;
				// 已经选中的数量
				var checked = $('input[name=hobby]:checked').length;
				// 简化 $('#chkAll').prop('checked', checked == all);
				if (checked == all) {
					$('#chkAll').prop('checked', true);
				} else {
					$('#chkAll').prop('checked', false);
				}
			});

			// 监听输入input 某些事件没有简写，只能on方法能够使用
			$('.info').on('input', function() {
				// 获取value
				var txt = $(this).val();
				// 还剩多少个字要输入
				var rest = 100 - txt.length
				$(this).siblings('small').text('还需要输入' + rest + '字');
			});
		</script>
	</body>
</html>
