<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>事件对象</title>
		<style>
			.box {
				width: 200px;
				height: 200px;
				border: 2px solid blue;
				position: fixed;
				font-size: 36px;
				text-align: center;
				line-height: 200px;
			}
		</style>
	</head>
	<body>
		<div class="box">
			拖动验证
		</div>
		<script src="js/jquery-3.3.1.min.js"></script>
		<script>
			$(document).ready(function() {
				// 修复文字bug
				$(".box").on("selectstart dragstart", function(e) {
					return false;
				});
				
				$(".box").on("mousedown", function(e) {
					// 记录鼠标当前位置
					var sx = e.clientX;
					var sy = e.clientY;
					// box当前的left/top
					var left = $(this).position().left;
					var top = $(this).position().top;
					$(document).on("mousemove", function(e) {
						// 记录终点鼠标位置
						var ex = e.clientX;
						var ey = e.clientY;
						// 计算两者之差
						var dx = ex - sx;
						var dy = ey - sy;

						$(".box").css("left", left + dx);
						$(".box").css("top", top + dy);
					});
				});
				// 移除事件
				$(document).on("mouseup", function() {
					$(document).off("mousemove");
				});

			});
		</script>
	</body>
</html>
