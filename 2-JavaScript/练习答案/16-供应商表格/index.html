<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>

	<body>
		<div class="container">
			<div class="main relative">
				<form action="" method="post">
					<div class="left fl">
						<div class="box">
							<label class="name" for="">供应商名称</label>
							<input class="input" type="text" name="" id="name" value="" />
						</div>
						<div class="box">
							<label class="name" for="">供应商编号</label>
							<input class="input" type="text" name="" id="num" value="" />
						</div>
						<div class="box">
							<label class="name" for="">邮箱</label>
							<input class="input" type="text" name="" id="email" value="" />
						</div>
						<div class="box">
							<label class="name" for="">法人代表</label>
							<input class="input" type="text" name="" id="person" value="" />
						</div>
					</div>
					<div class="right fl">
						<div class="box">
							<label class="name" for="">公司资质</label>
							<input class="input" type="text" name="" id="company" value="" />
						</div>
						<div class="box">
							<label class="name" for="">经营期限</label>
							<input class="input" type="text" name="" id="uptime" value="" />
						</div>
						<div class="box">
							<label class="name" for="">所属行业</label>
							<input class="input" type="text" name="" id="industry" value="" />
						</div>
						<div class="box">
							<input class="btn" type="button" name="btn" id="add" value="添加供应商" />
							<input class="btn hide" type="button" name="btn" id="save" value="保存修改" />
						</div>
					</div>
					<div class="clear"></div>
				</form>

				<div class="tab" id="tab">
					<table border="0" cellspacing="" cellpadding="">
						<thead>
							<tr>
								<th>
									<input type="checkbox">
								</th>
								<th>供应商名称</th>
								<th>供应商编号</th>
								<th>邮箱</th>
								<th>法人代表</th>
								<th>公司资质</th>
								<th>经营期限</th>
								<th>所属行业</th>
								<th>操作</th>
							</tr>
						</thead>

						<tbody>
							<tr>
								<td>
									<input type="checkbox">
								</td>
								<td>广州创汇科技有限公司</td>
								<td>20130908</td>
								<td>admin@163.com</td>
								<td>王青云</td>
								<td>品牌潜力</td>
								<td>2013-09-09 15:05</td>
								<td>高清技术行业</td>
								<td>
									<img class="del" src="img/icon1 (1).png" />
									<img class="edit" src="img/icon1 (2).png" />
									<img class="hide" src="img/icon1 (3).png" />
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox">
								</td>
								<td>江苏天益网络信息有限公司</td>
								<td>20130907</td>
								<td>uimaker@1sc.com</td>
								<td>笑三千</td>
								<td>未来的发展</td>
								<td>2013-09-08 14:02</td>
								<td>网站空间空间</td>
								<td>
									<img class="del" src="img/icon1 (1).png" />
									<img class="edit" src="img/icon1 (2).png" />
									<img class="hide" src="img/icon1 (3).png" />
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox">
								</td>
								<td>广州市晖来计算机科技有限公司</td>
								<td>20130906</td>
								<td>user@1sc-china.com</td>
								<td>江无锡</td>
								<td>搜索引擎</td>
								<td>2013-09-06 13:11</td>
								<td>智能家居</td>
								<td>
									<img class="del" src="img/icon1 (1).png" />
									<img class="edit" src="img/icon1 (2).png" />
									<img class="hide" src="img/icon1 (3).png" />
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox">
								</td>
								<td>青海兰金电子科技有限公司</td>
								<td>20130905</td>
								<td>admine@china.com</td>
								<td>邱京市</td>
								<td>检查它的独特性</td>
								<td>2013-09-06 10:36</td>
								<td>银行风险管控</td>
								<td>
									<img class="del" src="img/icon1 (1).png" />
									<img class="edit" src="img/icon1 (2).png" />
									<img class="hide" src="img/icon1 (3).png" />
								</td>
							</tr>
						</tbody>

					</table>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			//查找元素
			var oName = document.getElementById("name");
			var oNum = document.getElementById("num");
			var oEmail = document.getElementById("email");
			var oPerson = document.getElementById("person");
			var oCompany = document.getElementById("company");
			var oUptime = document.getElementById("uptime");
			var oIndustry = document.getElementById("industry");
			//添加按钮
			var oAdd = document.getElementById("add");
			//保存按钮
			var oSave = document.getElementById("save");
			//tbody
			var oTbody = document.querySelector("#tab tbody");
			//能否删除
			var flag = true;
			//缓存编辑行
			var oTd;
			//绑定事件
			oAdd.onclick = function() {
				//提取value
				var name = oName.value;
				var num = oNum.value;
				var email = oEmail.value;
				var person = oPerson.value;
				var company = oCompany.value;
				var uptime = oUptime.value;
				var industry = oIndustry.value;
				//非空判断
				if(!name || !num || !email || !person || !company || !uptime || !industry) {
					alert("部分选项未填写，请填写完整！");
					return false;
				}
				//插入数据
				var oTr = document.createElement("tr");
				oTr.innerHTML =
					'<td><input type="checkbox"></td>' +
					'<td>' + name + '</td>' +
					'<td>' + num + '</td>' +
					'<td>' + email + '</td>' +
					'<td>' + person + '</td>' +
					'<td>' + company + '</td>' +
					'<td>' + uptime + '</td>' +
					'<td>' + industry + '</td>' +
					'<td><img class="del" src="img/icon1 (1).png" />' +
					'<img class="edit" src="img/icon1 (2).png" />' +
					'<img class="hide" src="img/icon1 (3).png" /></td>';
				oTbody.appendChild(oTr);
				//清空value
				oName.value = '';
				oNum.value = '';
				oEmail.value = '';
				oPerson.value = '';
				oCompany.value = '';
				oUptime.value = '';
				oIndustry.value = '';
			}

			//事件委托
			oTbody.onclick = function(e) {
				//事件委托-删除
				if(e.target.className == 'del') {
					//检查状态
					if(!flag) {
						return false;
					}
					oTbody.removeChild(e.target.parentNode.parentNode);
				}
				//事件委托-隐藏
				if(e.target.className == 'hide') {
					e.target.parentNode.parentNode.style.display = "none";
				}
				//事件委托-编辑
				if(e.target.className == 'edit') {
					//tr NodeList
					oTd = e.target.parentNode.parentNode.cells;
					//还原数据
					oName.value = oTd[1].innerText;
					oNum.value = oTd[2].innerText;
					oEmail.value = oTd[3].innerText;
					oPerson.value = oTd[4].innerText;
					oCompany.value = oTd[5].innerText;
					oUptime.value = oTd[6].innerText;
					oIndustry.value = oTd[7].innerText;
					//禁用删除
					flag = false;
					//隐藏/显示按钮
					oAdd.style.display = "none";
					oSave.style.display = "block";
				}

			}
			/*
			 * 附加题：*****
			 * 点击“编辑”图标，将本行数据还原至上面的表单中
			 * 处于编辑状态时，禁止所有删除操作，不可删除数据
			 * "添加供应商"按钮隐藏，"保存修改"按钮显示
			 * 点击"保存修改"按钮，将修改之后的数据保存至原有数据的位置
			 */
			//保存修改
			oSave.onclick = function() {
				//替换数据
				oTd[1].innerText = oName.value;
				oTd[2].innerText = oNum.value;
				oTd[3].innerText = oEmail.value;
				oTd[4].innerText = oPerson.value;
				oTd[5].innerText = oCompany.value;
				oTd[6].innerText = oUptime.value;
				oTd[7].innerText = oIndustry.value;
				//恢复删除
				flag = true;
				//隐藏/显示按钮
				oAdd.style.display = "block";
				oSave.style.display = "none";
				//清空value
				oName.value = '';
				oNum.value = '';
				oEmail.value = '';
				oPerson.value = '';
				oCompany.value = '';
				oUptime.value = '';
				oIndustry.value = '';
			}
		</script>
	</body>

</html>