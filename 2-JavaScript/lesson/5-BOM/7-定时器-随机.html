<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style type="text/css">
			body {
				margin: 0;
			}

			.cube {
				background-color: #00ffdc;
				position: absolute;
				left: 0px;
			}

			.box {
				position: fixed;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				background-color: #EEEEEE;
			}
		</style>
	</head>

	<body>
		<div class="box">

		</div>
		<script type="text/javascript">
			// 查找元素
			var oBox = document.querySelector(".box");
			var winHeight = oBox.offsetHeight;
			var winWidth = oBox.offsetWidth;
			var tick;
			//生成方块
			function cubeGenerator() {
				// 创建元素
				var oCube = document.createElement("div");
				// 修饰元素
				// 随机的宽高 10~40 正方形
				var w = h = Math.random() * 30 + 10;
				oCube.style.width = w + "px";
				oCube.style.height = h + "px";
				// 随机的top
				var maxTop = winHeight - w;
				var y = Math.random() * maxTop;
				oCube.className = "cube";
				oCube.style.top = y + "px";
				// 随机颜色
				oCube.style.backgroundColor = rgb();
				// 插入元素
				oBox.appendChild(oCube);
				// 开始移动
				move(oCube);
			}
			tick = setInterval(cubeGenerator, 500);
			//rgb颜色随机
			function rgb() {
				var r = Math.floor(Math.random() * 256);
				var g = Math.floor(Math.random() * 256);
				var b = Math.floor(Math.random() * 256);
				var rgb = 'rgb(' + r + ',' + g + ',' + b + ')';
				return rgb;
			}

			function move(el) {
				var timer;
				timer = setInterval(function() {
					// 获取目前的left
					var left = el.offsetLeft;
					if (left > winWidth) {
						clearInterval(timer);
						oBox.removeChild(el);
					}
					el.style.left = (left + 10) + "px";
				}, 30)
			}
		</script>
	</body>

</html>
