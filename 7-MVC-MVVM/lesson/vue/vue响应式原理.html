<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>vue响应式原理</title>
	</head>
	<body>

		<script>
			// 对象--动态属性
			let person = {
				username: 'moz',
				birth: 1995,
			}

			Object.defineProperty(person, 'sex', {
				value: '男'
			});

			Object.defineProperty(person, 'age', {
				set(newValue) {
					console.log("set")
					this.birth = new Date().getFullYear() - newValue;
				},
				get() {
					console.log('get')
					return new Date().getFullYear() - this.birth;
				}
			});
		</script>

		<script type="text/javascript">
			let book = {
				author: "天下霸唱",
				price: 65,
				press: {
					name: "工业出版社"
				}
			}
			Observe(book);

			function Observe(obj) {
				Object.keys(obj).forEach((key) => {
					createReactive(obj, key, obj[key])
				});
			}

			function createReactive(obj, key, value) {
				Object.defineProperty(obj, key, {
					enumerable: true, // 可枚举
					configurable: false, // 不能再define
					set(newValue) {
						console.log('set');
						value = newValue;
					},
					get() {
						console.log('get')
						return value;
					}
				});
			}
			console.log(book);
		</script>
	</body>
</html>
